{"Batch":[{"Body":"{\"remhostlist\": [ \"{{.global.task.input.HostName}}\" ]}","ContentType":"json","EndpointRequestType":"Internal","Method":"PUT","Name":"RemoveHostFromFlashArrayHostGroup","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.RemoveHostFromFlashArrayHostGroup.output.HttpStatusCode 401}}","Message":"Invalid credentials. Please check the username and password for connecting to the endpoint.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{and (ge .global.RemoveHostFromFlashArrayHostGroup.output.HttpStatusCode 400) (lt .global.RemoveHostFromFlashArrayHostGroup.output.HttpStatusCode 600)}}","Error":true,"Message":"{{if .global.RemoveHostFromFlashArrayHostGroup.output.Errors}}{{$err := (index .global.RemoveHostFromFlashArrayHostGroup.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.Ctx}}: {{end}}{{$err.Msg}}{{else}}{{.global.RemoveHostFromFlashArrayHostGroup.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"true","Message":"Host removed from host group successfully.","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"HostGroupName","ObjectType":"content.Parameter","Path":"$.name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"HostsName","ObjectType":"content.Parameter","Path":"$.hosts","Secure":false,"Type":"collection"}],"Types":[]},"TargetType":"Endpoint","Url":"/hgroup/{{.global.task.input.HostGroupName}}"},{"Body":"{\"Type\":\"storage.PureHost\",\"NamingProperty\":\"Name\",\"Values\": [\"{{.global.task.input.HostName}}\"],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Host removed from host group successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/v1/task/PureScopedInventories"},{"Body":"{\"Type\":\"storage.PureHostGroup\",\"NamingProperty\":\"Name\",\"Values\": [\"{{.global.task.input.HostGroupName}}\"],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateHgroupInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateHgroupInventory.output.HttpStatusCode 200}}","Message":"Host removed from host group successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateHgroupInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateHgroupInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/v1/task/PureScopedInventories"}],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.PureArray"}},"Description":"Remove host from FlashArray host group","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"PureArrayApiErrorResponseHandler\""},"Name":"RemoveHostFromFlashArrayHostGroup","ObjectType":"workflow.BatchApiExecutor","Output":{"HostGroupName":"{{.global.RemoveHostFromFlashArrayHostGroup.output.HostGroupName}}","HostsName":"{{.global.RemoveHostFromFlashArrayHostGroup.output.HostsName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if (ne .global.task.input.StorageDevice.ObjectType \"storage.PureArray\")}} true {{else if (index .global.task.input \"HostGroupName\")}} false {{else}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"RemoveHostFromFlashArrayHostGroup\" and Version eq 2"}}